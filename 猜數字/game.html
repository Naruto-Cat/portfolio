<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŒœæ•¸å­—</title>
    <!-- CSS Resetï¼šmodern-normalize -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/modern-normalize@3.0.1/modern-normalize.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- èªªæ˜è¦–çª— -->
    <dialog class="info">
        <h3>èªªæ˜</h3>
        <ol>
            <li>æœ¬é åƒ…ä½œç‚ºå€‹äººä½œå“é›†å±•ç¤ºï¼Œä¸åšä»»ä½•ç‡Ÿåˆ©æˆ–å•†æ¥­ç”¨é€”ã€‚</li>
            <li>ç­”æ¡ˆå¯åœ¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ï¼ˆF12ï¼‰â†’ã€ŒConsoleï¼ä¸»æ§å°ã€æŸ¥çœ‹ã€‚</li>
            <li>è‹¥ä¸è¼¸å…¥å…§å®¹ï¼Œæˆ–è¼¸å…¥ã€Œ0ã€è¶…é 100ã€è² æ•¸ã€å«å°æ•¸é»ã€ï¼Œç³»çµ±éƒ½æœƒçµ¦å‡ºå›æ‡‰ã€‚</li>
        </ol>
        <div>
            <!-- äº†è§£æŒ‰éˆ• -->
            <button class="info-btn" type="button">äº†è§£</button>
        </div>
    </dialog>

    <!-- ç¶²é  -->
    <div class="wrap">
        <h1>çŒœæ•¸å­—éŠæˆ²</h1>
        <p class="game-desc">å°éŠæˆ²é–‹å§‹ï¼çŒœçŒœæˆ‘å€‘é¸äº†å“ªå€‹ 1-100 çš„éš¨æ©Ÿæ•¸ã€‚</p>
        <form>
            <label>
                çŒœä¸€å€‹æ•¸å­—ï¼š
                <input class="input" type="number" min="1" max="100">
                <!-- åªèƒ½è¼¸å…¥æ•´æ•¸ã€æµ®é»æ•¸ -->
            </label>
            <!-- æäº¤æŒ‰éˆ• -->
            <button class="check" type="button">æäº¤</button>
        </form>
        <p class="tip"></p> <!-- æç¤º -->
        <p class="record"></p> <!-- ç´€éŒ„ -->
        <!-- å†ç©ä¸€æ¬¡æŒ‰éˆ• -->
        <button class="play-again" type="button" hidden>å†ç©ä¸€æ¬¡</button>
    </div>

    <!-- èªªæ˜è¦–çª—çš„JS -->
    <script>
        //æŠ“å…ƒç´ 
        const dlg = document.querySelector('.info');
        const dlgBtn = document.querySelector('.info-btn');
        const ipt = document.querySelector('.input');

        //åªé¡¯ç¤º<dialog>ï¼Œç„¡æ³•è§¸åŠå…¶ä»–é é¢å…§å®¹
        dlg.showModal();

        //æŒ‰ä¸‹ã€Œäº†è§£ã€æŒ‰éˆ•ï¼Œé—œé–‰<dialog>
        dlgBtn.addEventListener("click", closeDlg);

        function closeDlg() {
            dlg.close();
            ipt.focus();
        }
    </script>

    <!-- é é¢çš„JS -->
    <script>
        //æŠ“å…ƒç´ 
        const checkBtn = document.querySelector('.check');
        const record = document.querySelector('.record');
        const tip = document.querySelector('.tip');
        const playAgainBtn = document.querySelector('.play-again');

        //ä¸€é€²é å°±åŸ·è¡Œ    
        let randomNumber;
        getAnswer();

        //ç”¢ç”Ÿç­”æ¡ˆ
        function getAnswer() {
            randomNumber = Math.floor(Math.random() * 100) + 1;
            /*
             ä¹˜100ï¼Œæ˜¯ç‚ºäº†èª¿æ•´æˆ 0~99
             åŠ 1ï¼Œæ˜¯ç‚ºäº†èª¿æ•´æˆ 1~100
             */
            console.log(`ç­”æ¡ˆæ˜¯ ${randomNumber}`);
        }

        //æŒ‰ä¸‹æäº¤ï¼Œå…ˆæª¢æŸ¥æ ¼å¼
        checkBtn.addEventListener("click", checkInput);


        //æª¢æŸ¥æ ¼å¼
        function checkInput() {
            //ç¦ç©ºç™½
            if (ipt.value === "") {
                tip.textContent = "ç©ºç™½ä¸æ”¶ä»¶ï½è«‹è¼¸å…¥å¾Œå†é€å‡º ğŸ“¦";
                ipt.focus();
            }

            //æ‰é–‹å§‹è½‰æ•¸å­—
            else {
                let iptValue = Number(ipt.value);

                if (iptValue > 100) {
                    tip.textContent = "è¶…é 100 æœƒå®³æˆ‘ç•¶æ©Ÿå•¦ï¼ˆèª¤ï¼‰ğŸ˜‚";
                    ipt.focus();
                }

                else if (Number.isInteger(iptValue) && iptValue < 0) {
                    tip.textContent = "è² æ•¸æ˜¯å¤–æ˜Ÿèªï½ ç³»çµ±åªæ‡‚ 0 ä»¥ä¸Š ğŸ›¸";
                    ipt.focus();
                }

                else if (iptValue === 0) {
                    tip.textContent = "é›¶åˆ†é€€å ´ï½ è«‹åŠ é»åˆ†æ•¸å†å›ä¾† ğŸ‘‹";
                    ipt.focus();
                }

                //æœ‰å°æ•¸é»
                else if (!Number.isInteger(iptValue) && iptValue > 0) {
                    tip.textContent = "å»è§’è³ªä¸€ä¸‹ï½ æŠŠé‚£é¡†å°æ•¸é»ç£¨æ‰ ğŸ§½";
                    ipt.focus();
                }
                else if (!Number.isInteger(iptValue) && iptValue < 0) {
                    tip.textContent = "è² èƒ½é‡é‚„åŠ å°æ•¸ï¼Ÿé€™å¤ªé‡å£å‘³ï½ ğŸ˜µ";
                    ipt.focus();
                }

                //éƒ½æ²’å•é¡Œï¼Œæ­£å¼æª¢æŸ¥
                else {
                    checkValue()
                }
            }
        }

        //å­˜æ”¾ user è¼¸å…¥éçš„æ•¸å­—
        let userRecord = [];

        //æ­£å¼æª¢æŸ¥
        function checkValue() {
            let iptValue = Number(ipt.value);

            if (iptValue === randomNumber) {
                tip.textContent = "ä¸­å•¦ä¸­å•¦ï½ä½ æ˜¯ç­”æ¡ˆç‹™æ“Šæ‰‹ ğŸ”«";
                record.textContent = "";
                //éŠæˆ²çµæŸ
                end()
            }

            else if (iptValue > randomNumber) {
                tip.textContent = "å†å°ä¸€é» â¬‡ï¸";
                ipt.focus();
                userRecord.push(iptValue);
                record.textContent = `ç´€éŒ„ï¼š ${userRecord.join('ã€')}`;
            }

            else if (iptValue < randomNumber) {
                tip.textContent = "å†å¤§ä¸€é» â¬†ï¸";
                ipt.focus();
                userRecord.push(iptValue);
                record.textContent = `ç´€éŒ„ï¼š ${userRecord.join('ã€')}`;
            }
        }

        //éŠæˆ²çµæŸ
        function end() {
            //ç¦ç”¨
            ipt.disabled = true;
            checkBtn.disabled = true;
            //å‡ºç¾ã€Œå†ç©ä¸€æ¬¡ã€
            playAgainBtn.hidden = false;
            playAgainBtn.addEventListener("click", again);
        }

        //å†ç©ä¸€æ¬¡
        function again() {
            playAgainBtn.hidden = true;

            //ç¦ç”¨å–æ¶ˆ
            ipt.disabled = false;
            checkBtn.disabled = false;
            ipt.focus();

            //æ¸…ç©º
            console.clear();
            tip.textContent = "";
            ipt.value = "";
            userRecord = [];

            getAnswer() //ç­”æ¡ˆåˆ·æ–°
        }
    </script>
</body>

</html>